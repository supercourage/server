#
# Test alter table to and from s3
#
create table t1 (a int, b int) engine=aria;
insert into t1 select seq,seq+10 from seq_1_to_1000;
alter table t1 engine=s3;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL
) ENGINE=S3 DEFAULT CHARSET=latin1 PAGE_CHECKSUM=1
alter table t1 comment="hello";
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL
) ENGINE=S3 DEFAULT CHARSET=latin1 PAGE_CHECKSUM=1 COMMENT='hello'
alter table t1 engine=aria;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL
) ENGINE=Aria DEFAULT CHARSET=latin1 PAGE_CHECKSUM=1 COMMENT='hello'
drop table t1;
#
# Test changing s3 table
#
create table t1 (a int, b int) engine=aria select seq,seq+10 from seq_1_to_1000;
alter table t1 engine=s3;
alter table t1 engine=s3, compression_algorithm="zlib";
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `seq` bigint(20) unsigned NOT NULL,
  `seq+10` bigint(21) unsigned NOT NULL
) ENGINE=S3 DEFAULT CHARSET=latin1 PAGE_CHECKSUM=1 `compression_algorithm`='zlib'
select * from t1 limit 5;
a	b	seq	seq+10
NULL	NULL	1	11
NULL	NULL	2	12
NULL	NULL	3	13
NULL	NULL	4	14
NULL	NULL	5	15
drop table t1;
#
# Test rename table
#
create table t1 (a int, b int) engine=aria select seq,seq+10 from seq_1_to_10;
alter table t1 engine=s3;
rename table t1 to t2;
select count(*), sum(a), sum(b) from t2;
count(*)	sum(a)	sum(b)
10	NULL	NULL
select count(*), sum(a), sum(b) from t1;
ERROR 42S02: Table 'test.t1' doesn't exist
drop table t2;
